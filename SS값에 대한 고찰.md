### SS값에 대한 고찰

SS값이 어디에 설정되어있는건지 코드를 한참 찾아보다가 문득 SS라는게 자체값으로 되어있으면 설정해주지않아도 되는게 아닌가 생각이 들어서 찾아보았다.

찾아보니 명시적으로 칩 선택 핀을 설정하지 않고, #define SS_PIN 10 이런 정의를 하지 않더라도, SS만 적어주면 보드의 기본 칩 선택 핀을 사용할 수 있었다.

결론은 #define SS_PIN 10 을 설정하지 않은 상태에서도 pinMode(SS, OUTPUT) 와 SD.begin(SS) 를 사용할 수 있다. 그러나 SS는 보드에 따라 다른 핀 번호를 가지며, 이는 아두이노 보드에서의 기본 칩 선택 핀을 의미한다는것. 기본적으로 SS는 아두이노 보드의 SPI 핀 매핑에 따라 정의되어 있다는 것이다.

### 라이브러리 정의 확인

`SPI.h`와 `SD.h` 라이브러리의 정의를 확인하는 방법이다.

### `SPI.h` 라이브러리

`SPI.h` 라이브러리에서 기본 `SS` 핀은 다음과 같이 설정된다:

```cpp
cpp코드 복사
// SPI.h 파일 내부에서 SS 핀 정의
#if defined(__AVR_ATmega1280__) || defined(__AVR_ATmega2560__)
  static const uint8_t SS   = 53;
#elif defined(__AVR_ATmega328P__)
  static const uint8_t SS   = 10;
// 다른 보드에 대한 정의
#endif

```

### `SD.h` 라이브러리

`SD` 라이브러리의 `SD.h` 파일에서는 `SS` 핀을 기본적으로 사용한다:

```cpp
cpp코드 복사
// SD.h 파일 내부에서 SD.begin() 함수 정의
boolean begin(uint8_t csPin = SS) {
  // csPin으로 기본 SS 핀을 사용
  // 초기화 과정 생략
}

```

이 코드와 파일들에서 `SS` 핀이 기본적으로 어떻게 정의되고 사용되는지 알 수 있다.

### 요약

- `SS` 핀은 각 보드의 `pins_arduino.h` 파일에서 정의되며, 보드에 따라 다르다.
- `SD` 라이브러리와 `SPI` 라이브러리에서 기본적으로 `SS` 핀을 사용하도록 설정되어 있다.
- `pinMode(SS, OUTPUT)`와 `SD.begin(SS)`를 사용하여 기본 `SS` 핀을 명시적으로 설정하지 않고도 SD 카드를 초기화할 수 있다.

---

이 다음에 자이로 센서와 GPS 센서 등 센서들 오면 1층보드에 3.3V 전압 걸 수 있으니 합체시켜서 SD카드에 제대로 정보가 저장되는지 확인할 예정이다.

---

## 회로도에 있던 주요 구성 요소와 핀에 대해 자세하게 알아보았다

## 커패시터(Capacitor)

- 정의: 커패시터는 전기 에너지를 전기장 형태로 저장하는 수동 전자 부품이다.
- 설명: 커패시터는 두 개의 전도체(플레이트) 사이에 절연체(디엘렉트릭)를 두고 전하를 저장한다. 커패시터의 용량은 플레이트의 면적과 디엘렉트릭의 종류 및 두께에 따라 결정된다. 회로에서는 다음과 같은 용도로 사용된다.
    - 필터링: 전원 공급의 노이즈를 제거하거나 전압 변동을 평활화하는 데 사용된다.
        - ****평활화***: 데이터의 급격한 변동을 감소시키거나 제외시키는 작동을 실시하는 일
    - 디커플링: 전원 라인의 고주파 성분을 제거하여 안정적인 전원을 공급한다.
    - 타이밍: 저항기와 함께 RC 타이머 회로에서 시간 지연을 생성한다.
    - 에너지 저장: 짧은 시간 동안 에너지를 저장하고 공급한다.

### 저항기(Resistor)

- 정의: 저항기는 전기 회로에서 전류의 흐름을 제한하는 수동 전자 부품이다.
- 설명: 저항기는 옴의 법칙(V=IR)에 따라 전압과 전류의 관계를 설정한다. 저항기의 주요 용도는 다음과 같다.
    - 전류 제한: 회로 내 전류의 크기를 조절하여 과전류로부터 보호한다.
    - 전압 분할: 특정 전압을 얻기 위해 전압을 분할한다.
    - 바이어스 설정: 트랜지스터와 같은 활성 소자의 동작점을 설정한다.
    - 필터 회로: 커패시터와 함께 필터 회로를 구성하여 특정 주파수를 차단하거나 통과시킨다.

### 카드 감지 핀(Card Detection Pin)

- 정의: SD 카드 리더 모듈에서 SD 카드가 삽입되었는지 여부를 감지하는 핀이다.
- 설명: 카드 감지 핀은 SD 카드 슬롯에 있는 스위치와 연결되어 있으며, SD 카드가 삽입되면 스위치가 닫혀 전기 신호가 변한다. 이를 통해 마이크로컨트롤러는 SD 카드의 삽입 상태를 알 수 있다.

### 데이터 라인(Data Line)

- 정의: SD 카드와 마이크로컨트롤러 간의 데이터 전송을 위한 라인이다.
- 설명: SD 카드에는 여러 데이터 라인이 있으며, 각 라인은 다음과 같은 역할을 한다.
    - DAT0: 데이터 라인 0, 주로 데이터 전송에 사용된다.
    - DAT1: 데이터 라인 1, 보조 데이터 전송에 사용된다.
    - DAT2: 데이터 라인 2, 보조 데이터 전송에 사용된다.
    - DAT3: 데이터 라인3, 카드 감지 및 데이터 전송에 사용된다.

### 커맨드 라인(Command Line, CMD)

- 정의: SD 카드와 마이크로컨트롤러 간에 명령을 주고받기 위한 라인이다.
- 설명: 커맨드 라인은 마이크로컨트롤러가 SD 카드에 명령을 보내고, SD 카드가 해당 명령에 응답하는 데 사용된다. 예를 들어, 데이터 읽기, 쓰기, 파일 시스템 정보 요청 등의 명령이 있다.

### VDD(Power Supply)

- 정의: 전원 입력 핀이다.
- 설명: VDD 핀은 SD 카드 리더 모듈에 전원을 공급하는 핀이다. 일반적으로 3.3V 또는 5V 전원이 연결된다. 이 전원은 SD 카드와 관련 회로를 동작시키는 데 필요하다.

### 클록 라인(Clock Line, CLK)

- 정의: SD 카드와 마이크로컨트롤러 간의 데이터 전송을 동기화하기 위한 라인이다.
- 설명: 클록 라인은 SPI 통신에서 SD 카드와 마이크로컨트롤러 간의 데이터 전송 속도를 동기화하기 위해 사용된다. 클록 신호는 일정한 주기로 변하며, 이 주기에 맞춰 데이터가 전송된다.

### VSS(Ground, GND)

- 정의: 그라운드 핀이다.
- 설명: VSS 또는 GND 핀은 회로에서 공통 기준 전위를 제공하는 핀이다. 모든 전기 신호는 이 기준 전위에 대해 측정되며, 회로의 안정성을 위해 모든 장치가 동일한 그라운드에 연결된다.

### 요약

- 커패시터: 전기 에너지를 저장하고 필터링 및 디커플링 등에 사용된다.
- 저항기: 전류를 제한하고 전압을 분할하며 바이어스 설정 등에 사용된다.
- 카드 감지 핀: SD 카드가 삽입되었는지 감지한다.
- 데이터 라인: SD 카드와 마이크로컨트롤러 간의 데이터 전송에 사용된다.
- 커맨드 라인: SD 카드에 명령을 보내고 응답을 받는다.
- VDD: 전원을 공급하는 핀이다.
- 클록 라인: 데이터 전송을 동기화한다.
- VSS(GND): 회로의 공통 기준 전위를 제공한다. (제로 전위라고도 한다)

### 주요 구성 요소

1. MSDC M61408: SD 카드 리더 모듈이다. SD 카드와 아두이노 또는 다른 마이크로컨트롤러 사이의 인터페이스 역할을 한다.
2. R26, R27, R28, R29, R30, R31, R32: 저항기이다. 저항기는 회로 내에서 전류를 제한하거나 전압을 조정하는 역할을 한다. 저항기의 값은 일반적으로 회로 다이어그램에서 지정된다.
3. C14(10uF 커패시터): 커패시터는 전하를 저장하는 소자이다. 주로 전원 공급의 안정화를 위해 사용된다. 10uF 커패시터는 10마이크로패럿의 용량을 가지며, 전원 공급의 노이즈를 제거하거나 평활화하는 데 사용될 수 있다.
4. PB4: SD 카드 삽입 감지 핀이다. SD 카드가 삽입되었는지 감지하는 데 사용된다. PB4는 마이크로컨트롤러의 특정 핀을 의미한다.

### 핀 설명

1. 핀 1 (DAT2): 데이터 라인 2이다. SD 카드의 데이터 전송을 위해 사용되는 네 개의 데이터 라인 중 하나이다.
2. 핀 2 (CD_DAT3): 카드 감지 및 데이터 라인 3이다. SD 카드의 데이터 전송 라인이자, SD 카드가 삽입되었는지를 감지하는 라인이다.
3. 핀 3  (CMD): 커맨드 라인. SD 카드에 명령을 보내는 데 사용된다. 마이크로컨트롤러가 SD 카드에 데이터를 요청하거나 설정을 변경하기 위해 명령을 보내는 통로이다.
4. 핀 4 (VDD): 전원 입력 핀이다. 일반적으로 3.3V 전원을 연결한다.
5. 핀 5 (CLK): 클록 라인. SD 카드와 마이크로컨트롤러 간의 데이터 전송 속도를 동기화하기 위해 클록 신호를 전달하는 라인이다.
6. 핀 6 (VSS): 그라운드 핀이다. 전기 회로에서 공통 기준 전위를 제공하는 역할을 한다.
7. 핀 7 (DAT0): 데이터 라인 0이다. SD 카드의 데이터 전송을 위해 사용되는 주요 데이터 라인이다.
8. 핀 8 (DAT1): 데이터 라인 1이다. SD 카드의 데이터 전송을 위해 사용되는 네 개의 데이터 라인 중 하나이다.
9. 핀 10 (card_detection): 카드 감지 라인이다. SD 카드가 삽입되었는지 확인하기 위해 사용된다. PB4와 연결되어 SD 카드의 상태를 마이크로컨트롤러로 전달한다.

---
